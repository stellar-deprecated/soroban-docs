{
    "openrpc": "1.2.4",
    "info": {
        "version": "0.9.4",
        "title": "Soroban RPC",
        "description": "A public discussion about the design of soroban-rpc."
    },
    "methods": [
        {
            "name": "getEvents",
            "summary": "Clients can request a filtered list of events emitted by a given ledger range.",
            "description": "Clients can request a filtered list of events emitted by a given ledger range.\n\nSoroban-RPC will support querying within a maximum 24 hours of recent ledgers.\n\nNote, this could be used by the client to only prompt a refresh when there is a new ledger with relevant events. It should also be used by backend Dapp components to \"ingest\" events into their own database for querying and serving.\n\nIf making multiple requests, clients should deduplicate any events received, based on the event's unique id field. This prevents double-processing in the case of duplicate events being received.\n\nBy default soroban-rpc retains the most recent 24 hours of events.",
            "paramStructure": "by-name",
            "params": [
                {
                    "name": "startLedger",
                    "summary": "Stringified ledger sequence number to fetch events after (inclusive).",
                    "description": "Stringified ledger sequence number to fetch events after (inclusive). This method will return an error if startLedger is less than the oldest ledger stored in this node, or greater than the latest ledger seen by this node. If a cursor is included in the request, startLedger must be omitted.",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                },
                {
                    "name": "filters",
                    "summary": "List of filters for the returned events.",
                    "description": "List of filters for the returned events. Events matching any of the filters are included. To match a filter, an event must match both a contractId and a topic. Maximum 5 filters are allowed per request.",
                    "required": true,
                    "schema": {
                        "type": "array",
                        "maxItems": 5,
                        "items": {
                            "$ref": "#/components/schemas/EventFilter"
                        }
                    }
                },
                {
                    "name": "pagination",
                    "summary": "Pagination options",
                    "description": "Pagination options. See \"[Pagination](/rpc/pagination)\" for further details",
                    "required": false,
                    "schema": {
                        "$ref": "#/components/schemas/PaginationOptions"
                    }
                }
            ],
            "result": {
                "name": "event",
                "description": "An event",
                "schema": {
                    "type": "object",
                    "properties": {
                        "latestLedger": {
                            "$ref": "#/components/schemas/LatestLedger"
                        },
                        "events": {
                            "type": "array",
                            "description": "An array of events matching the request filters.",
                            "items": {
                                "$ref": "#/components/schemas/Event"
                            }
                        }
                    }
                }
            },
            "examples": [
                {
                    "name": "getNativeTransferEventsRequestExample",
                    "description": "Example request to the `getEvents` method, filtering for `transfer` events for native Lumens.",
                    "params": [
                        {
                            "name": "startLedger",
                            "value": "211000"
                        },
                        {
                            "name": "filters",
                            "value": [
                                {
                                    "type": "contract",
                                    "contractIds": [
                                        "7dc1ecdf9335199fc9918dbe0c732ce1d1146aa8f29cc9c360afc6a747ae94df"
                                    ],
                                    "topics": [
                                        ["AAAADwAAAAh0cmFuc2Zlcg==", "*", "*", "*"]
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "pagination",
                            "value": {
                                "limit": 2
                            }
                        }
                    ],
                    "result": {
                        "name": "getTransferEventsResultExample",
                        "description": "Example result from the `getEvents` method, filtering for `transfer` events for native Lumens.",
                        "value": {
                            "events": [
                                {
                                    "type": "contract",
                                    "ledger": "211006",
                                    "ledgerClosedAt": "2023-08-03T16:16:12Z",
                                    "contractId": "7dc1ecdf9335199fc9918dbe0c732ce1d1146aa8f29cc9c360afc6a747ae94df",
                                    "id": "0000906263869267968-0000000002",
                                    "pagingToken": "0000906263869267968-0000000002",
                                    "topic": [
                                        "AAAADwAAAAh0cmFuc2Zlcg==",
                                        "AAAAEgAAAAAAAAAAuSCF9kqJ7Wkc6NZqtw5/w1g6jXoKiv1ffuaJxLU+mq4=",
                                        "AAAAEgAAAAGErV5iDTjEuXkwSPfCUOlKEstBD1h/CbogP37IZYfILA==",
                                        "AAAADgAAAAZuYXRpdmUAAA=="
                                    ],
                                    "value": {
                                        "xdr": "AAAACgAAAAAAAAAAAAAAAACYloA="
                                    },
                                    "inSuccessfulContractCall": true
                                },
                                {
                                    "type": "contract",
                                    "ledger": "211014",
                                    "ledgerClosedAt": "2023-08-03T16:16:55Z",
                                    "contractId": "7dc1ecdf9335199fc9918dbe0c732ce1d1146aa8f29cc9c360afc6a747ae94df",
                                    "id": "0000906298229006336-0000000002",
                                    "pagingToken": "0000906298229006336-0000000002",
                                    "topic": [
                                        "AAAADwAAAAh0cmFuc2Zlcg==",
                                        "AAAAEgAAAAAAAAAAuSCF9kqJ7Wkc6NZqtw5/w1g6jXoKiv1ffuaJxLU+mq4=",
                                        "AAAAEgAAAAGErV5iDTjEuXkwSPfCUOlKEstBD1h/CbogP37IZYfILA==",
                                        "AAAADgAAAAZuYXRpdmUAAA=="
                                    ],
                                    "value": {
                                        "xdr": "AAAACgAAAAAAAAAAAAAAAACYloA="
                                    },
                                    "inSuccessfulContractCall": true
                                }
                            ],
                            "latestLedger": "212417"
                        }
                    }
                },
                {
                    "name": "getAllEventsRequestExample",
                    "description": "Example request to the `getEvents` method, filtering for all events of all types for any and all contracts.",
                    "params": [
                        {
                            "name": "startLedger",
                            "value": "211000"
                        },
                        {
                            "name": "filters",
                            "value": []
                        },
                        {
                            "name": "pagination",
                            "value": {
                                "limit": 2
                            }
                        }
                    ],
                    "result": {
                        "name": "getAllEventsResultExample",
                        "description": "Example result from the `getEvents` method, filtering for all events of all types for any and all contracts.",
                        "value": {
                            "events": [
                                {
                                    "type": "diagnostic",
                                    "ledger": "211006",
                                    "ledgerClosedAt": "2023-08-03T16:16:12Z",
                                    "contractId": "",
                                    "id": "0000906263869267968-0000000000",
                                    "pagingToken": "0000906263869267968-0000000000",
                                    "topic": [
                                        "AAAADwAAAAdmbl9jYWxsAA==",
                                        "AAAADQAAACCErV5iDTjEuXkwSPfCUOlKEstBD1h/CbogP37IZYfILA==",
                                        "AAAADwAAAAppbnNlcnRjb2luAAA="
                                    ],
                                    "value": {
                                        "xdr": "AAAAEgAAAAAAAAAAuSCF9kqJ7Wkc6NZqtw5/w1g6jXoKiv1ffuaJxLU+mq4="
                                    },
                                    "inSuccessfulContractCall": true
                                },
                                {
                                    "type": "diagnostic",
                                    "ledger": "211006",
                                    "ledgerClosedAt": "2023-08-03T16:16:12Z",
                                    "contractId": "84ad5e620d38c4b9793048f7c250e94a12cb410f587f09ba203f7ec86587c82c",
                                    "id": "0000906263869267968-0000000001",
                                    "pagingToken": "0000906263869267968-0000000001",
                                    "topic": [
                                        "AAAADwAAAAdmbl9jYWxsAA==",
                                        "AAAADQAAACB9wezfkzUZn8mRjb4Mcyzh0RRqqPKcycNgr8anR66U3w==",
                                        "AAAADwAAAAh0cmFuc2Zlcg=="
                                    ],
                                    "value": {
                                        "xdr": "AAAAEAAAAAEAAAADAAAAEgAAAAAAAAAAuSCF9kqJ7Wkc6NZqtw5/w1g6jXoKiv1ffuaJxLU+mq4AAAASAAAAAYStXmINOMS5eTBI98JQ6UoSy0EPWH8JuiA/fshlh8gsAAAACgAAAAAAAAAAAAAAAACYloA="
                                    },
                                    "inSuccessfulContractCall": true
                                }
                            ],
                            "latestLedger": 212476
                        }
                    }
                }
            ]
        }
    ]
}
